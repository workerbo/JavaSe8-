###### bootstrap

bootstrap是spring cloud的配置上下文加载。

bootstrap.yml 可以理解成系统级别的一些参数配置，这些参数一般是不会变动的。例如其他微服务的IP知道。

Spring Cloud 会创建一个 Bootstrap Context，作为 Spring 应用的 Application Context 的父上下文。

也就是说如果加载的 application.yml 的内容标签与 bootstrap 的标签一致，application 也不会覆盖 bootstrap，而 application.yml 里面的内容可以动态替换。

bootstrap.yml典型的应用场景微服务的 注册中心、配置中心、项目名称spring.application.name



bootstrap.yml 用于应用程序上下文的引导阶段



###### 启动过程

在[微服务](https://so.csdn.net/so/search?q=微服务&spm=1001.2101.3001.7020)的环境中 我们说的IOC容器实际上有三层意思：bootstrap容器，Spring容器，微服务组件容器

- bootstrapContext 我们常说的SpringCloud容器，由监听器创建 用来初始化SpringCloud上下文。

  ​     实例化SpringApplication最重要的两行代码就是通过SPI的方式加载 ApplicationContextInitializer和ApplicationListener。

  ​      spring在初始化环境变量的时候会发送ApplicationEnvironmentPreparedEvent事件，而BootstrapApplicationListener又会监听ApplicationEnvironmentPreparedEvent这个事件

    addAncestorInitializer(application, context); 设置父容器。在springboot容器还没有被创建的的时候。

  ​         因为第一次调用SpringApplication.run()会执行到创建环境变量的代码 在prepareEnvironment方法中会发送事件但是当BootstrapApplicationListener监听到事件的时候又会通过SpringApplicationBuilder来构建一个SpringApplication对象执行其run方法
  

- springbootContext 我们接触最多的容器 平时用的就是这个容器

- NamedContextFactory 可以理解为微服务组件的容器工厂，用于管理所有组件容器

     在一个程序中不同远程微服务的客户端有不同的以及相同的配置，有不同的 Bean，也有相同的 Bean。我们可以针对每一个微服务将他们的 Bean 所处于 ApplicationContext 独立开来，不同微服务客户端使用不同的 ApplicationContext。